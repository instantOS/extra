# Maintainer: paperbenni <paperbenni@gmail.com>
_pkgname=instantlaunch
pkgname=$_pkgname
pkgver=202010271558
pkgrel=1
pkgdesc="helper for appimages on instantOS"
url="https://github.com/instantOS/instantLAUNCH"
arch=('any')
license=('MIT')
depends=('bash' 'instantmenu')
makedepends=('git')
provides=(instantlaunch)
conflicts=(instantlaunch)
source=("$_pkgname::git+https://github.com/instantOS/instantlaunch.git")

sha256sums=('SKIP')

pkgver() {
    cd $_pkgname
    echo "$(date '+%Y%m%d%H%M')"
}

prepare() {
    cd $_pkgname
    echo "no prepare"
}

build() {
    cd $_pkgname
    echo "no build"
}

package() {
    cd $_pkgname
    mkdir -p ${pkgdir}/usr/bin
    mkdir -p "$pkgdir/usr/share/applications/"
    mkdir -p "$pkgdir/usr/share/mime/packages/"

    mv xml/* "${pkgdir}/usr/share/mime/packages/"

    chmod 644 *.desktop
    mv *.desktop "$pkgdir/usr/share/applications/"

    chmod +x *.sh
    mv instantlaunch.sh ${pkgdir}/usr/bin/instantwelcome
}
